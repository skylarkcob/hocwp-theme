window.hocwpTheme=window.hocwpTheme||{};jQuery(document).ready(function(b){var a=b("body");b.fn.hocwpUpdateMeta=function(c){return this.each(function(){var f=b(this),e=f.attr("data-meta-type"),d=f.attr("data-meta-key"),i=f.attr("data-meta-value"),h=f.attr("data-id");var g=b.extend({},b.fn.hocwpUpdateMeta.defaults,c);if(!b.trim(e)){e=g.meta_type}f.on("click",function(){var j=f.attr("data-value-type"),k=parseInt(f.attr("data-require-login"));if(1==k&&!a.hasClass("logged-in")){window.location.href=hocwpTheme.loginUrl;return}a.trigger("hocwpTheme:ajaxStart",[f]);b.ajax({type:"POST",dataType:"JSON",url:hocwpTheme.ajaxUrl,cache:true,data:{action:"hocwp_theme_ajax",callback:"update_meta",method:"post",meta_type:e,meta_key:d,meta_value:i,object_id:h,value_type:j,change_id:f.attr("data-object-id"),nonce:hocwpTheme.nonce},success:function(n){if(n.success){i=n.data.meta_value;f.attr("data-meta-value",i);var l=f.parent(),p=l.find(f.attr("data-display-result"));if(p.length&&n.data.formatted_meta_value){p.html(n.data.formatted_meta_value)}if("up_down"===j){f.addClass("disabled");f.prop("disabled",true)}var m=f.attr("data-text"),o=f.attr("data-undo-text");if("undo"==n.data.job_action&&b.trim(m)){f.html(m)}else{if("do"==n.data.job_action&&b.trim(o)){f.html(o)}}}f.trigger("hocwpUpdateMeta:ajaxSuccess",[f,n]);if(n.data&&n.data.message&&b.trim(n.data.message)){alert(n.data.message)}},complete:function(l){a.trigger("hocwpTheme:ajaxComplete",[f,l]);f.blur()}})})})};b.fn.hocwpUpdateMeta.defaults={meta_type:"post"};(function(){b("[data-ajax-meta='1']").hocwpUpdateMeta()})()});