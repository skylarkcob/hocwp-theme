window.wp=window.wp||{};window.hocwpThemeMediaUpload=window.hocwpThemeMediaUpload||{};jQuery(document).ready(function(c){var a=c("body");function b(d){return d.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}a.on("click",".hocwp-theme .remove-media-data",function(h){h.preventDefault();h.stopPropagation();var g=c(this),d=g.closest("div"),i=d.find("input.media-url"),f=d.find("input.media-id");i.val("");f.val("");g.hide()});a.on("click",".hocwp-theme .select-media",function(j){j.preventDefault();j.stopPropagation();var h=c(this),d=h.closest("div"),n=Boolean(parseInt(h.attr("data-multiple"))||parseInt(hocwpThemeMediaUpload.multiple)),f=null,k=d.find("button.remove-media-data");if(f){f.open()}else{var l=c.trim(h.attr("data-title"))||hocwpThemeMediaUpload.l10n.title,m=c.trim(h.attr("data-button-text"))||hocwpThemeMediaUpload.l10n.buttonText,i=c.trim(h.attr("data-media-type"))||"image";l=l.replace("%s",b(i));m=m.replace("%s",i);var g={title:l,button:{text:m},multiple:n};if("file"!=i){g.library={type:i}}f=wp.media(g);f.open()}f.on("select",function(){var o=f.state().get("selection");if(n){}else{var r=o.first().toJSON();if(r){if("file"===i){var u=d.find("input.media-url"),e=d.find("input.media-id");u.val(r.url);e.val(r.id);k.show()}else{var t=document.createElement("img"),s=d.closest(".widget");t.setAttribute("src",r.url);t.setAttribute("alt",r.alt);t.setAttribute("width",r.width);t.setAttribute("height",r.height);d.find("input").val(r.id).trigger("change");h.html(t);if(!h.hasClass("has-media")){var q=hocwpThemeMediaUpload.updateImageDescription,p=hocwpThemeMediaUpload.removeImageButton;q=q.replace("%s",i);p=p.replace("%s",i);c(q).insertAfter(d.find(".hide-if-no-js"));c(p).insertAfter(d.find(".hide-if-no-js").last());h.addClass("has-media")}if(s.length){s.find("input[type='submit']").val(wpWidgets.l10n.save).prop("disabled",false)}}}}d.find("a, img").trigger("blur")})});a.on("click",".hocwp-theme .remove-media",function(h){h.preventDefault();h.stopPropagation();var f=c(this),d=f.closest("div"),g=d.find(".select-media");g.html(g.attr("data-text"));g.removeClass("has-media");f.parent().remove();d.find(".howto").remove();d.find("input").val("").trigger("change")})});