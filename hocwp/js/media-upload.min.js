window.wp=window.wp||{};window.hocwpTheme=window.hocwpTheme||{};window.hocwpThemeMediaUpload=window.hocwpThemeMediaUpload||{};jQuery(document).ready(function(c){var a=c("body");function b(d){return d.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}a.on("click",".hocwp-theme .remove-media-data",function(h){h.preventDefault();h.stopPropagation();var g=c(this),d=g.closest("div"),i=d.find("input.media-url"),f=d.find("input.media-id");i.val("");f.val("");g.hide()});a.on("click",".hocwp-theme .insert-images",function(l){l.preventDefault();l.stopPropagation();var k=this,i=c(k),f=i.closest("div"),d=f.find(".list-images"),o=true,g=null;if(g){g.open()}else{var m=c.trim(i.attr("data-title"))||hocwpThemeMediaUpload.l10n.title,n=c.trim(i.attr("data-button-text"))||hocwpThemeMediaUpload.l10n.buttonText,j="image";m=m.replace("%s",b(j));n=n.replace("%s",j);var h={title:m,button:{text:n},multiple:o};g=wp.media(h);g.open()}g.on("select",function(){var p=g.state().get("selection"),e=f.find("input"),q=c.parseJSON(e.val());if(!q){q=[]}p.map(function(u){u=u.toJSON();if(u){var t=document.createElement("img"),r=document.createElement("li"),s=document.createElement("span");t.setAttribute("src",u.url);t.setAttribute("alt",u.alt);t.setAttribute("width",u.width);t.setAttribute("height",u.height);r.setAttribute("class","ui-state-default");r.setAttribute("data-id",u.id);r.appendChild(t);s.setAttribute("class","dashicons dashicons-no-alt");r.appendChild(s);d.append(r);q.push(u.id)}});q=JSON.stringify(q);e.val(q);if(q){f.find("button.remove-images").show()}i.trigger("blur")})});a.on("click",".hocwp-theme .list-images img",function(m){m.preventDefault();m.stopPropagation();var k=this,i=c(k),d=i.closest("li"),f=d.closest("div"),p=false,g=null,l=d.index();if(g){g.open()}else{var n=c.trim(i.attr("data-title"))||hocwpThemeMediaUpload.l10n.changeTitle,o=c.trim(i.attr("data-button-text"))||hocwpThemeMediaUpload.l10n.buttonText,j="image";n=n.replace("%s",b(j));o=o.replace("%s",j);var h={title:n,button:{text:o},multiple:p};g=wp.media(h);g.open()}g.on("select",function(){var r=g.state().get("selection"),q=f.find("input"),u=c.parseJSON(q.val()),t=r.first().toJSON();if(!u){u=[]}var v=document.createElement("img"),e=document.createElement("li"),s=document.createElement("span");v.setAttribute("src",t.url);v.setAttribute("alt",t.alt);v.setAttribute("width",t.width);v.setAttribute("height",t.height);e.setAttribute("class","ui-state-default");e.setAttribute("data-id",t.id);e.appendChild(v);s.setAttribute("class","dashicons dashicons-no-alt");e.appendChild(s);d.replaceWith(e);u[l]=(t.id);u=JSON.stringify(u);q.val(u);i.trigger("blur");if(u){f.find("button.remove-images").show()}})});a.on("click",".hocwp-theme .select-media",function(j){j.preventDefault();j.stopPropagation();var h=c(this),d=h.closest("div"),n=Boolean(parseInt(h.attr("data-multiple"))||parseInt(hocwpThemeMediaUpload.multiple)),f=null,k=d.find("button.remove-media-data");if(f){f.open()}else{var l=c.trim(h.attr("data-title"))||hocwpThemeMediaUpload.l10n.title,m=c.trim(h.attr("data-button-text"))||hocwpThemeMediaUpload.l10n.buttonText,i=c.trim(h.attr("data-media-type"))||"image";l=l.replace("%s",b(i));m=m.replace("%s",i);var g={title:l,button:{text:m},multiple:n};if("file"!=i){g.library={type:i}}f=wp.media(g);f.open()}f.on("select",function(){var o=f.state().get("selection");if(n){}else{var r=o.first().toJSON();if(r){if("file"===i){var u=d.find("input.media-url"),e=d.find("input.media-id");u.val(r.url);e.val(r.id);k.show()}else{var t=document.createElement("img"),s=d.closest(".widget");t.setAttribute("src",r.url);t.setAttribute("alt",r.alt);t.setAttribute("width",r.width);t.setAttribute("height",r.height);d.find("input").val(r.id).trigger("change");h.html(t);if(!h.hasClass("has-media")){var q=hocwpThemeMediaUpload.updateImageDescription,p=hocwpThemeMediaUpload.removeImageButton;q=q.replace("%s",i);p=p.replace("%s",i);c(q).insertAfter(d.find(".hide-if-no-js"));c(p).insertAfter(d.find(".hide-if-no-js").last());h.addClass("has-media")}if(s.length){s.find("input[type='submit']").val(wpWidgets.l10n.save).prop("disabled",false)}}}}d.find("a, img").trigger("blur")})});a.on("click",".hocwp-theme .remove-media",function(h){h.preventDefault();h.stopPropagation();var f=c(this),d=f.closest("div"),g=d.find(".select-media");g.html(g.attr("data-text"));g.removeClass("has-media");f.parent().remove();d.find(".howto").remove();d.find("input").val("").trigger("change")});a.on("click",".list-images .ui-state-default .dashicons-no-alt",function(k){k.preventDefault();var i=this,h=c(i),d=h.closest("li"),f=d.closest("div"),g=f.find("input");if(confirm(hocwpTheme.l10n.confirmDeleteMessage)){var j=c.parseJSON(g.val());if(j){j.splice(d.index(),1);j=JSON.stringify(j);g.val(j);d.remove()}}});a.on("click",".images-box button.remove-images",function(j){j.preventDefault();var h=this,g=c(h),d=g.closest("div"),f=d.find("input"),i=d.find(".list-images");if(confirm(hocwpTheme.l10n.confirmDeleteMessage)){f.val("");i.html("");g.trigger("blur");g.hide()}})});