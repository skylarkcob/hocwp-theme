window.wp=window.wp||{};jQuery(document).ready(function(b){var a=b("body");b.fn.hocwpCodeEditor=function(c){if(wp.codeEditor){var d=b.extend(wp.codeEditor.defaultSettings,b.fn.hocwpCodeEditor.defaults,c);return this.each(function(){var l=d,g=b(this),i=g.next(),h=g.closest("div.widget"),j=g.attr("data-mode");if(!b.trim(j)){j="htmlmixed"}l.codemirror.mode=j;var m=null;if(!g.hasClass("initialized")||null===m){m=wp.codeEditor.initialize(g,l);g.addClass("initialized")}m.codemirror.setSize(null,g.height());if("widgets"===window.pagenow&&h&&h.length){var e;e=b(".widgets-holder-wrap:not(#available-widgets)").find("div.widget");e.one("click.toggle-widget-expanded",function k(){var n=b(this);if(n.is(h)){setTimeout(function(){m.codemirror.refresh()},100)}});setTimeout(function(){m.codemirror.refresh()},100);i.attr({role:"textbox","aria-multiline":"true","aria-labelledby":g.attr("id")+"-label","aria-describedby":"editor-keyboard-trap-help-1 editor-keyboard-trap-help-2 editor-keyboard-trap-help-3 editor-keyboard-trap-help-4"});b("#"+g.attr("id")+"-label").on("click",function(){m.codemirror.focus()});g.on("change",function(){if(this.value!==m.codemirror.getValue()){m.codemirror.setValue(this.value)}});m.codemirror.on("change",function(){var n=m.codemirror.getValue();if(n!==g.val()){g.val(n).trigger("change")}});if(wp.customize){m.codemirror.on("keydown",function f(p,o){var n=27;if(n===o.keyCode){o.stopPropagation()}})}}})}return this};b.fn.hocwpCodeEditor.defaults={autoRefresh:true};(function(){b("textarea[data-code-editor='1']").hocwpCodeEditor();if(a.hasClass("term-desc-html")){var c=b(".term-php .form-table").find("textarea#description");if(c&&c.length){c.attr("rows",20);c.hocwpCodeEditor()}}})()});